<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping cart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../Shopping cart/Shopping.css">
</head>
<body class="font-sans bg-gray-50">
    <nav class="h-14 bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center gap-6 text-white font-bold">
        <a href="../Home-page/Home-page.html" class="hover:underline">หน้าหลัก</a>
        <a href="../category/category.html" class="hover:underline">หมวดหมู่สินค้า</a>
        <a href="../Shopping cart/Shopping-cart.html" class="hover:underline">ตะกร้าสินค้า</a>
        <a href="../Profile/profile.html" class="hover:underline">
            <img src="https://tse1.mm.bing.net/th/id/OIP.2FAQg06FvvfETwJis8vFvwHaHa?cb=defcachec2&w=626&h=626&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Company logo" title="profile" class="h-full w-12 rounded-xl">
        </a>
    </nav>
    <br>
    

<main class="max-w-4xl mx-auto my-5 px-10">

    <h1 class="text-2xl font-bold mb-6 text-center">
        ตะกร้าสินค้าของคุณ
    </h1>

    <!--รายการสินค้า-->
    <section class="bg-white shadow-md rounded-lg p-10 mb-6 ">

        <!-- หัวตาราง -->
        <div class="grid grid-cols-5 font-bold border-b pb-2 mb-4 text-center">
            <div class="col-span-2 text-left">สินค้า</div>
            <div>ราคาต่อชิ้น</div>
            <div>จำนวน</div>
        </div>

        <!--สินค้า1-->
        <div class="grid grid-cols-5 items-center text-center mb-4 cart-item">
            <div class="col-span-2 flex items-center gap-4 text-left">
                <img src="https://pawdy.co.th/wp-content/uploads/2024/01/Mockup-Matulity-Senior-7-font-1-768x768.jpg"
                     alt="Pawdy Senior"
                     class="w-20 h-20 object-cover rounded">
                <span class="font-semibold">
                    Pawdy Senior 7+ อาหารสุนัขสูงวัย
                </span>
            </div>
            
            <div>฿350</div>

            <div class="flex justify-center items-center gap-2">
                <button class="qty-minus px-2 py-1 bg-gray-200 hover:bg-rose-500 rounded">-</button>
                <span class="qty" data-price="350">1</span>
                <button class="qty-plus px-2 py-1 bg-gray-200 hover:bg-lime-500 rounded">+</button>
            </div>
            
            <!--ปุ่มลบ-->
            <div class="flex items-center gap-3" id="cart-container">
                <button onclick="removeItem(this)" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600">
                    <img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png" alt="ลบ" class="w-4 h-4">
                </button>
            </div>            
            <br>
            <p>ราคารวมสินค้า:</p><div class="item-total font-bold">฿350</div>
        </div>

        <!--สินค้า2-->
        <div class="grid grid-cols-5 items-center text-center mb-4 cart-item">
            <div class="col-span-2 flex items-center gap-4 text-left">
                <img src="https://pawdy.co.th/wp-content/uploads/2024/02/Mockup-Holistic-Feline-_-Kitten-font-2-768x768.jpg"
                     alt="Pawdy Kitten"
                     class="w-20 h-20 object-cover rounded">
                <span class="font-semibold">
                    Pawdy Holistic อาหารลูกแมว
                </span>
            </div>

            <div>฿450</div>

            <div class="flex justify-center items-center gap-2">
                <button class="qty-minus px-2 py-1 bg-gray-200 hover:bg-rose-500 rounded">-</button>
                <span class="qty" data-price="450">1</span>
                <button class="qty-plus px-2 py-1 bg-gray-200 hover:bg-lime-500 rounded">+</button>
            </div>
            <!--ปุ่มลบ-->
            <div class="flex items-center gap-3" id="cart-container">
                    <button onclick="removeItem(this)" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600">
                    <img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png" alt="ลบ" class="w-4 h-4">
                    </button>
            </div> 
            <br>
            <p>ราคารวมสินค้า:</p><div class="item-total font-bold">฿450</div>

        </div>

    </section>

    <!--สรุปราคา-->
    <section class="bg-white shadow-md rounded-lg p-4">

        <div class="flex justify-between mb-2">
            <span>จำนวนสินค้า</span>
            <span id="item-count">2 ชิ้น</span>
        </div>

        <div class="flex justify-between mb-2">
            <span>วิธีการชำระเงิน</span>
            <span id="item-price">Credit Card</span>

        </div>

        <div class="flex justify-between mb-2">
            <span>ราคารวมสินค้า</span>
            <span id="subtotal">฿800</span>
        </div>

        <div class="flex justify-between mb-2">
            <span>ค่าจัดส่ง</span>
            <span id="shipping">฿50</span>
        </div>

        <div class="flex justify-between font-bold text-lg border-t pt-2">
            <span >รวมทั้งหมด</span>
            <span id="grand-total">฿850</span>
        </div>

        <div class="flex justify-between font-bold text-lg border-t pt-2">
            <span id="payment-method-label" >ช่องทางการชำระเงิน</span>
            <span id="payment-method">เก็บเงินปลายทาง</span>
        </div>

        <div>
            <a href="../Shopping cart/add-address.html" class="mt-4 inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                เพิ่มที่อยู่
            </a>
        <!--ที่อยู่ที่บันทึกจะแสดงที่นี่-->
        <div id="saved-address" class="mt-4 p-4 bg-gray-100 rounded">
        </div>
        
            

        <!-- ตัวเลือกการชำระเงิน -->
        <div class="mt-6 flex justify-end gap-4">

            <!--ปลายทาง-->
             
                <label class="flex items-center gap-2 border p-4 rounded cursor-pointer">
                    <input type="radio" name="payment" onclick="selectPayment('เก็บเงินปลายทาง')" checked>
                    <span class="font-semibold">เก็บเงินปลายทาง</span>
                </label>
            

            <!--โอนผ่านธนาคาร-->
             
                <label class="flex items-center gap-2 border p-4 rounded cursor-pointer">
                    <input type="radio" name="payment" onclick="selectPayment('โอนผ่านธนาคาร')">
                    <span class="font-semibold">โอนผ่านธนาคาร</span>
                </label>
            

            <!-- พร้อมเพย์ -->
             
                <label class="flex items-center gap-2 border p-4 rounded cursor-pointer">
                    <input type="radio" name="payment" onclick="selectPayment('พร้อมเพย์')">
                    <span class="font-semibold">พร้อมเพย์</span>
                </label>
             
        </div>

        <div class="mt-6 flex justify-end gap-4">
            <a href="../Home-page/Home-page.html"
               class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
               เลือกซื้อสินค้าต่อ
            </a>

            <button class="confirmPayment px-6 py-2 bg-lime-500 text-white font-bold rounded hover:bg-lime-600" onclick="confirmPayment()">
                ชำระเงิน
            </button>
        </div>


    </section>

</main>

<!--Footer -->
<footer class="text-center py-4 text-sm text-gray-500 mt-10">
    © 2026 Hand In Paw Pethome
</footer>

<script>

    const shippingCost = 50;

    // อัปเดตราคา
    function updateCart() {
        let subtotal = 0;
        let totalQty = 0;

    document.querySelectorAll(".qty").forEach(qtyEl => {
        const price = parseInt(qtyEl.dataset.price);
        const qty = parseInt(qtyEl.textContent);
        const itemTotal = price * qty;
            qtyEl.closest(".cart-item")
                 .querySelector(".item-total")
                .textContent = "฿" + itemTotal;

        subtotal += itemTotal;
        totalQty += qty;
    });

    document.getElementById("subtotal").textContent = "฿" + subtotal;
    document.getElementById("grand-total").textContent = "฿" + (subtotal + shippingCost);
    document.getElementById("item-count").textContent = totalQty + " ชิ้น";
    }

    // ปุ่ม +
    document.querySelectorAll(".qty-plus").forEach(btn => {
        btn.addEventListener("click", () => {
            const qtyEl = btn.previousElementSibling;
            qtyEl.textContent = parseInt(qtyEl.textContent) + 1;
            updateCart();
        });
    });

    // ปุ่ม -
    document.querySelectorAll(".qty-minus").forEach(btn => {
        btn.addEventListener("click", () => {
            const qtyEl = btn.nextElementSibling;
            let qty = parseInt(qtyEl.textContent);
            if (qty > 1) {
                qtyEl.textContent = qty - 1;
                updateCart();
            }
        });
    });

    // ลบสินค้า (ลบทั้งแถว)
    function removeItem(btn) {
        btn.closest(".cart-item").remove();
        updateCart();
    }

    // แสดงช่องทางชำระเงิน
    function selectPayment(method) {
        document.getElementById("payment-method").innerText = method;
    }

    // ชำระเงิน
    function confirmPayment() {
        alert("ทำรายการชำระเงินเรียบร้อย");
    }
    <!-- ดึงข้อมูลที่อยู่จาก localStorage หน้า address-->
    window.onload = function() {
        const savedAddress = JSON.parse(localStorage.getItem("address"));
        if (savedAddress) {
            document.getElementById("saved-address").innerHTML = `
                <p><strong>ชื่อ:</strong> ${savedAddress.fullname}</p>
                <p><strong>เบอร์:</strong> ${savedAddress.phone}</p>
                <p><strong>ที่อยู่:</strong> ${savedAddress.address}</p>
                <p><strong>อำเภอ:</strong> ${savedAddress.district}</p>
                <p><strong>จังหวัด:</strong> ${savedAddress.province}</p>
                <p><strong>รหัสไปรษณีย์:</strong> ${savedAddress.zipcode}</p>
            `;
        }
    };
</script>

    <script>
        function selectPayment(method) {
            document.getElementById("payment-method").innerText = method;
        }
    </script>

</body>
</html>