<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>เพิ่มที่อยู่</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="../Shopping cart/Shopping.css">
</head>
<body> 
<h3 class="flex flex-row space-x-5 h-14 bg-gradient-to-r from-cyan-500 to-blue-400 items-center justify-center text-white font-bold ">
    <nav class="h-14 bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center gap-6 text-white font-bold">
        <a href="../Home-page/Home-page.html" class="hover:underline">หน้าหลัก</a>
        <a href="../category/category.html" class="hover:underline">หมวดหมู่สินค้า</a>
        <a href="../Shopping cart/Shopping-cart.html" class="hover:underline">ตะกร้าสินค้า</a>
        <a href="../Profile/profile.html" class="hover:underline">
            <img src="https://tse1.mm.bing.net/th/id/OIP.2FAQg06FvvfETwJis8vFvwHaHa?cb=defcachec2&w=626&h=626&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Company logo" title="profile" class="h-full w-12 rounded-xl">
        </a>
    </nav>
</h3>

    <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-md mx-auto mt-10">
        <h2 class="text-xl font-bold text-center mb-4">เพิ่มที่อยู่</h2>

        <form onsubmit="saveAddress(event)" class="flex flex-col gap-3">

            <input type="text" id="fullname" placeholder="ชื่อ-นามสกุล" class="bg-gray-100 p-2 rounded" required>
            <input type="text" id="phone" placeholder="เบอร์โทรศัพท์" class="bg-gray-100 p-2 rounded" maxlength="10" required>
            <textarea id="address" placeholder="ที่อยู่ (บ้านเลขที่ / ถนน / หมู่บ้าน)"
            class="bg-gray-100 p-2 rounded" required></textarea>
            <input type="text" id="district" placeholder="อำเภอ / เขต"
            class="bg-gray-100 p-2 rounded" required>
            <input type="text" id="province" placeholder="จังหวัด" class="bg-gray-100 p-2 rounded" required>
            <input type="text" id="zipcode" placeholder="รหัสไปรษณีย์" class="bg-gray-100 p-2 rounded" maxlength="5" required>
            <button type="submit"
                class="bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition">บันทึกที่อยู่
            </button>
            <p id="error" class="text-red-500 text-sm text-center"></p>
        </form>
        
        <hr class="my-4">
   
    </div>

<script>
function saveAddress(event) {

    event.preventDefault();

    const fullname = document.getElementById("fullname").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const address = document.getElementById("address").value.trim();
    const district = document.getElementById("district").value.trim();
    const province = document.getElementById("province").value.trim();
    const zipcode = document.getElementById("zipcode").value.trim();
    const errorText = document.getElementById("error");

    errorText.innerText = "";

    if (!fullname || !phone || !address || !district || !province || !zipcode) {
        errorText.innerText = "กรุณากรอกข้อมูลให้ครบทุกช่อง";
        return;
    }

    if (zipcode.length !== 5 || isNaN(zipcode)) {
        errorText.innerText = "รหัสไปรษณีย์ต้องเป็นตัวเลข 5 หลัก";
        return;
    }

    // บันทึกลง localStorage
    const addressData = {
        fullname,
        phone,
        address,
        district,
        province,
        zipcode
    };

    localStorage.setItem("address", JSON.stringify(addressData));

    alert("บันทึกที่อยู่สำเร็จ");

    displayAddress();
    window.location.href = "Shopping-cart.html";
}

function displayAddress() {

    const saved = JSON.parse(localStorage.getItem("address"));
    const container = document.getElementById("saved-address");

    if (!saved) {
        container.innerHTML = "ยังไม่มีข้อมูลที่อยู่";
        return;
    }
    
    container.innerHTML = `
        <p><strong>ชื่อ:</strong> ${saved.fullname}</p>
        <p><strong>เบอร์:</strong> ${saved.phone}</p>
        <p><strong>ที่อยู่:</strong> ${saved.address}</p>
        <p><strong>อำเภอ:</strong> ${saved.district}</p>
        <p><strong>จังหวัด:</strong> ${saved.province}</p>
        <p><strong>รหัสไปรษณีย์:</strong> ${saved.zipcode}</p>
    `;
}

window.onload = function() {
    displayAddress();
    return false;
};

</script>

</body>
</html>